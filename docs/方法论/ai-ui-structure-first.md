# AI UI 开发方法论：结构先行

> 核心命题：AI 擅长填充细节，不擅长创建结构。给它专业骨架，它就是武器；给它空白画布，它就出泔水。

---

## 一、问题定义

AI 生成 UI 的三大失败模式：

| 失败模式 | 表现 | 根因 |
|---------|------|------|
| **布局漂浮** | 元素随意散落，间距忽大忽小 | AI 没有空间韵律感 |
| **层次扁平** | 所有信息同等重要，视线无引导 | AI 不做信息优先级判断 |
| **风格泛化** | 做什么都像 SaaS landing page | AI 回归训练数据的统计平均值 |

这些不是 prompt 写得不好的问题，而是 AI 缺少**约束系统**的问题。

---

## 二、方法论：三层约束架构

```
Layer 3: 内容 ←← AI 自由填充（文案、图标、配色微调、交互）
Layer 2: 结构 ←← 从参照物提取（section 顺序、grid、间距比例）
Layer 1: 规则 ←← 编码为 design tokens + 规范文档（AI 的行为边界）
```

### Layer 1：规则层（Design Tokens + 规范）

不是给 AI 一个参照物截图，而是把设计决策编码成机器可读的约束。

**我们项目的实践：**

```
globals.css
├── --primary: #004D9E          ← 品牌色锁定
├── --grid-guide: rgba(0,0,0,0.05)  ← 装饰系统参数
├── --container-max: 1080px     ← 内容区宽度锁定
├── --divider: #ebebeb          ← 分割线统一
└── --radius: 0.5rem            ← 圆角基准

docs/S/tokens.md               ← token 语义文档
docs/S/grid.md                  ← 网格系统规范
.claude/rules/coding-standards.md  ← 代码约束
```

**关键原则：** Token 不是颜色值列表，而是**设计决策的编码**。`--container-max: 1080px` 背后是「Vercel 的内容密度控制策略」这个决策。

### Layer 2：结构层（布局骨架）

从验证过的参照物中提取**信息架构**和**视觉节奏**，不是提取像素。

**提取什么 vs 不提取什么：**

| 提取（决策） | 不提取（表象） |
|-------------|--------------|
| section 顺序：Hero → Proof → Chain → Products → CTA | 具体标题文案 |
| 字号比例关系：H1 是 body 的 2.4x | 具体 px 数值 |
| 间距韵律：section gap = card gap 的 3x | 具体 padding 值 |
| 视觉层次：eyebrow → heading → body → CTA → proof | 具体颜色搭配 |
| 信息密度：每屏 1 个核心信息 + 1 个 CTA | 具体内容数量 |

**我们项目的实践路径：**

```
1. 参照物选择
   Swagelok（信息架构）+ Vercel（视觉精度）
   ↓
2. 多原型生成与评估
   5 个方向 → 4 维度矩阵评分 → 选定 v6 混合方案
   ↓
3. 结构提取
   Section sequence, grid system, spacing rhythm, visual hierarchy
   ↓
4. 编码为组件骨架
   GridFrame, GridSection, GridBlock → 可复用的布局原语
```

### Layer 3：内容层（AI 的自由空间）

在固定骨架内，AI 做它擅长的事：

- 替换文案（结合 i18n 系统）
- 选择图标/图片
- 调整配色变体
- 编写交互逻辑
- 响应式适配细节

---

## 三、两种实施路径对比

### 路径 A：复制骨架法（Rexan 方法）

```
UI Blocks 库（tailark / shadcn blocks）
    → 复制 section HTML
    → 粘贴给 AI
    → AI 在结构内填内容
```

**适用场景：** 独立开发者快速出 MVP、原型验证、非核心页面

**优势：**
- 启动速度极快（分钟级）
- 不需要设计知识
- 即开即用

**局限：**
- 骨架是别人的决策，不一定适合你的用户
- 换页面就要重新找骨架
- 迭代时容易偏离原始结构

### 路径 B：提取规则法（本项目方法）

```
参照物研究
    → 提取设计决策（不是像素）
    → 编码为 design tokens + 布局组件 + 规范文档
    → AI 在规则系统内工作
```

**适用场景：** 正式产品、需要多页面一致性、长期迭代

**优势：**
- 规则可复用到任意新页面
- 迭代时结构稳定，只调细节
- AI 的约束来自第一性原理，不是特定模板

**局限：**
- 前期投入大（研究 + 提取 + 编码）
- 需要理解「为什么这样设计」，不只是「怎样设计」

### 关键区别

| 维度 | 路径 A | 路径 B |
|------|--------|--------|
| 输入给 AI 的是 | HTML 代码（一个实例） | Token + 规范（一套规则） |
| AI 理解的是 | 「照这个排」 | 「按这些原则排」 |
| 新页面成本 | 重新找骨架 | 规则自动适用 |
| 一致性保障 | 靠人工对齐 | 靠系统保障 |
| 上限 | 等于模板质量 | 等于规则系统质量 |

---

## 四、「偷取结构」的具体操作流程

不管选哪条路径，「从专业设计师那里偷结构」的步骤是一样的：

### Step 1：选参照物（不是随便选）

**选择标准：**
- 你的目标用户已经在用的同类产品（验证过的信息架构）
- 你想传达的品牌调性的成功案例（验证过的视觉语言）
- 两者可以来自不同领域，交叉组合

**我们的选择：**
| 参照物 | 偷什么 | 为什么 |
|--------|--------|--------|
| Swagelok | 信息架构、section 顺序、B2B 工业品内容策略 | 同行业标杆，采购经理认可的信息组织方式 |
| Vercel | 视觉精度、间距系统、grid 装饰、排版克制 | 设计品质天花板，但不是我们的行业 |

**交叉组合 = Swagelok 的骨 + Vercel 的皮**

### Step 2：多方向探索 + 结构化评估

不要只生成一个方案。生成 3-5 个方向，用矩阵评分。

**我们的实践：**
- 5 个原型方向（Navy+Amber、Twitter Blue、The Forge、Stitch A、Stitch B）
- 4 维度评估：视觉方向、落地页结构、CRO、设计系统
- 最终选 v6 = v3 的信息架构 + v2 的视觉精度 + Swagelok 的内容策略

**为什么多方向重要：** 单一方向让你只看到一种可能。多方向让你看到哪些决策是跨方向共通的（这些才是真正重要的结构），哪些是风格偏好（这些可以调）。

### Step 3：提取设计决策（核心环节）

逐层提取，从宏观到微观：

```
Level 1 — 信息架构
  "Hero 用 split layout, 左文右图"
  "Proof bar 紧跟 hero, 不单独成 section"
  "CTA 在 fold 上方 + 页面底部各出现一次"

Level 2 — 视觉节奏
  "明暗交替：白 → 灰 → 白 → 蓝"
  "section 间距 80px，card 间距 20px，比值 4:1"
  "每个 section 有且只有一个视觉焦点"

Level 3 — 组件模式
  "卡片：左图标右文字，1px border，8px radius"
  "数字指标：mono 字体 + 2 行 label"
  "Section header：eyebrow + H2 + subtitle, 居左"

Level 4 — 装饰系统
  "1080px 外框线，5% 透明度"
  "Hero 区 12 列 guide 线"
  "section 之间 1px divider line"
```

### Step 4：编码为约束系统

把提取的决策变成 AI 能理解和遵守的形式：

| 决策层 | 编码形式 | 存放位置 |
|--------|---------|---------|
| 信息架构 | Section 顺序文档 + page 组件组合 | `docs/design/`, `page.tsx` |
| 视觉节奏 | Design tokens (CSS variables) | `globals.css`, `docs/S/tokens.md` |
| 组件模式 | 可复用组件 + 规范文档 | `src/components/`, `docs/S/components.md` |
| 装饰系统 | Grid 组件库 | `src/components/grid/` |
| 代码约束 | Lint 规则 + pre-commit hooks | `.claude/rules/`, `lefthook.yml` |

### Step 5：约束下的 AI 生成

到这一步，AI 的工作空间已经被精确定义：

```
固定的：
  ✓ Section 顺序（page.tsx 已定义）
  ✓ Grid 系统（1080px, 12col, 装饰层）
  ✓ 色彩系统（tokens 锁定）
  ✓ 间距系统（8px base grid）
  ✓ 组件边界（Server/Client 分离）

自由的：
  → 文案语气和长度
  → 图片/图标选择
  → 微交互和动效
  → 响应式断点细节
  → 内容数量调整（3 张卡 vs 4 张）
```

---

## 五、质量保障：防止结构腐蚀

结构建好后最大的风险是**渐进腐蚀**——每次小改动都微微偏离原始结构，100 次后面目全非。

### 防腐蚀机制

| 机制 | 做什么 | 我们的实践 |
|------|--------|-----------|
| **Token 锁定** | 所有视觉值从 CSS variable 读取，不允许 hardcode | `globals.css` 统一定义 |
| **架构守卫** | Pre-commit hook 检查架构规则 | `lefthook.yml` → architecture-guard |
| **组件边界** | Server/Client 分离，布局组件不含业务逻辑 | `.claude/rules/architecture.md` |
| **复杂度门控** | 函数 ≤120 行，文件 ≤500 行 | ESLint + quality-gate |
| **视觉回归** | Browser DOM 检查 + 截图对比 | Grid 集成验证流程 |

### 何时允许打破结构

结构不是教条。打破结构需要满足：

1. **有明确的用户需求驱动**（不是「我觉得可以更好」）
2. **评估影响范围**（局部打破 vs 全局打破）
3. **更新规则系统**（如果打破是正确的，把新决策编码回 tokens/docs）

---

## 六、适用边界

### 这套方法论适用于

- 需要多页面一致性的产品网站
- 有明确目标用户和转化目标的 B2B/B2C 站点
- 长期维护迭代的项目
- AI 辅助开发的团队/个人

### 不适用于

- 一次性落地页（直接用路径 A 更高效）
- 艺术性/实验性项目（结构约束会限制创意）
- 还在找方向的早期探索阶段（先 diverge，后 converge）

---

## 七、总结

```
空白画布 + AI = 泔水
模板复制 + AI = 及格
规则系统 + AI = 专业

差别不在 AI 的能力，在你给它的约束质量。
```

约束不是限制，是**释放**。在一个精心设计的笼子里，AI 的每一步都是对的。
